(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[10],{101:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return w}));var a=n(24),c=n.n(a),r=n(35),s=n(1),i=n(100),o=n(275),u=n(112),l=n(114),d=n(420),j="/api/v1",h={credentials:"same-origin",headers:{"Content-Type":"application/json"}},b=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;Object(i.a)(this,n);var c=e.message;return(a=t.call(this,c)).response=void 0,a.status=void 0,Error.captureStackTrace&&Error.captureStackTrace(Object(o.a)(a),p),a.response=e,a.status=e.status,a}return n}(Object(d.a)(Error)),p=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){Object(i.a)(this,n);var c="Got status ".concat(e.status," ").concat(e.statusText," when fetching ").concat(j+a);return t.call(this,Object(s.a)(Object(s.a)({},e),{},{message:c}))}return n}(b);function f(e){return e.startsWith("/")?e:"/"+e}function O(e,t){return m.apply(this,arguments)}function m(){return(m=Object(r.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=7;break}return e.next=3,t.json();case 3:if("success"===(a=e.sent).status){e.next=6;break}throw new b(Object(s.a)({message:"Server response did not have `status === 'success`"},a));case 6:return e.abrupt("return",a.payload);case 7:throw new p(t,n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return v.apply(this,arguments)}function v(){return(v=Object(r.a)(c.a.mark((function e(t){var n,a,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],t=f(t),e.next=4,fetch((n?"":j)+t,Object(s.a)(Object(s.a)({},h),{},{method:"GET"}));case 4:return a=e.sent,e.next=7,O(a,t);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return y.apply(this,arguments)}function y(){return(y=Object(r.a)(c.a.mark((function e(t){var n,a,r,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},a=i.length>2&&void 0!==i[2]&&i[2],t=f(t),e.next=5,fetch((a?"":j)+t,Object(s.a)(Object(s.a)({},h),{},{method:"POST",body:JSON.stringify(n)}));case 5:return r=e.sent,e.next=8,O(r,t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},800:function(e,t,n){},801:function(e,t,n){},802:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return k}));var a=n(0),c=n.n(a),r=(n(326),n(5)),s=n(24),i=n.n(s),o=n(35),u=n(34),l=n(428),d=n(1374),j=n(1371),h=n(101),b=(n(800),n(6));function p(e){return e.split(/\s+/).map((function(e){return e.charAt(0).toLocaleUpperCase()+e.slice(1)})).join(" ")}function f(){var e=Object(r.h)(),t=null===e||void 0===e?void 0:e.url_token,n=c.a.useState(null),a=Object(u.a)(n,2),s=a[0],f=a[1],O=c.a.useState(null),m=Object(u.a)(O,2),x=m[0],v=m[1],w=c.a.useState(""),y=Object(u.a)(w,2),g=y[0],k=y[1],S=c.a.useState(!1),C=Object(u.a)(S,2),N=C[0],A=C[1],T=c.a.useState(!1),D=Object(u.a)(T,2),F=D[0],_=D[1],E=["accepted","rejected","withdrawn"].includes((null===s||void 0===s?void 0:s.status)||"");function H(){return I.apply(this,arguments)}function I(){return(I=Object(o.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=x){e.next=2;break}throw new Error("Cannot submit a `null` decision");case 2:return n={decision:x,signature:g||null},e.next=5,Object(h.b)("/public/contracts/".concat(t,"/").concat(x),n,!0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,H();case 3:_(!1),window.location.reload(!0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(c.a.useEffect((function(){function e(){return(e=Object(o.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(h.a)("/public/contracts/".concat(t,"/details"),!0);case 3:n=e.sent,f(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[f,t]),null==t)return Object(b.jsx)(c.a.Fragment,{children:"Unknown URL token."});if(null==s)return Object(b.jsx)(c.a.Fragment,{children:"Loading..."});var P=s.position_code,U=s.status;return Object(b.jsxs)("div",{className:"contract-page",children:[Object(b.jsx)("div",{className:"header",children:Object(b.jsxs)("h1",{children:["Offer of Teaching Assistantship for ",P]})}),Object(b.jsxs)("div",{className:"content",children:[Object(b.jsxs)("div",{className:"decision",children:[Object(b.jsx)("h3",{children:Object(b.jsx)(l.a,{href:"/public/contracts/".concat(t,".pdf"),role:"button",children:"Download PDF"})}),Object(b.jsxs)("h1",{children:["Status:",Object(b.jsxs)("span",{className:"".concat(U," capitalize"),children:[" ",p(U)]})]}),Object(b.jsxs)("form",{id:"decision",children:[Object(b.jsx)("h3",{children:"I hereby accept the Teaching Assistantship position offered:"}),Object(b.jsxs)("div",{className:"decision-container",children:[Object(b.jsx)("input",{checked:"accept"===x,onChange:function(){return v("accept")},type:"radio",value:"accept",id:"radio-accept",name:"decision",disabled:E}),Object(b.jsx)("label",{htmlFor:"radio-accept",children:"Accept"}),Object(b.jsx)("input",{checked:"reject"===x,onChange:function(){return v("reject")},type:"radio",value:"reject",id:"radio-reject",name:"decision",disabled:E}),Object(b.jsx)("label",{htmlFor:"radio-reject",children:"Reject"}),Object(b.jsx)("div",{className:"signature",children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("label",{htmlFor:"signature_name",children:[Object(b.jsx)("p",{children:"I confirm that I will be registered as a University of Toronto student or PDF on the date that this appointment begins. I understand that if I should cease to be registered as a University of Toronto student or PDF during the period of this appointment, for any reason other than convocation, I must immediately notify my supervisor, and my appointment may be terminated."}),Object(b.jsx)("p",{children:"To accept this contract, type your initials:"})]}),Object(b.jsx)("input",{type:"text",name:"signature_name",id:"signature_name",maxLength:300,value:g,onChange:function(e){return k(e.target.value)}}),Object(b.jsx)("div",{className:"input-placeholder",children:"."})]})}),Object(b.jsx)(l.a,{disabled:null==x||"accept"===x&&""===g,title:null==x?"You must choose to accept or reject the contract in order to submit":"accept"===x&&""===g?"You must sign your name to accept the offer":"Submit your decision",onClick:function(){return A(!0)},children:"Submit"})]})]}),Object(b.jsx)("div",{className:"admonishment",children:Object(b.jsxs)("p",{children:[Object(b.jsx)("b",{children:"Important:"})," In order to arrange payroll, if this is your first TA-ship or your SIN number has been changed since your last TA-ship, you must supply the department office with appropriate documentation."]})})]}),Object(b.jsx)("div",{className:"contract-view",children:Object(b.jsx)("iframe",{title:"Contract",src:"/public/contracts/".concat(t)})})]}),Object(b.jsxs)(d.a,{show:N,onHide:function(){return A(!1)},children:[Object(b.jsx)(d.a.Header,{closeButton:!0,children:Object(b.jsxs)(d.a.Title,{children:[p(x||"")," Offer"]})}),Object(b.jsxs)(d.a.Body,{children:["Are you sure you want to ",Object(b.jsx)("b",{children:x})," the TA-ship for this offer?"]}),Object(b.jsxs)(d.a.Footer,{children:[Object(b.jsx)(l.a,{variant:"secondary",onClick:function(){return A(!1)},children:"Cancel"}),Object(b.jsxs)(l.a,{onClick:function(){return L.apply(this,arguments)},children:[F?Object(b.jsx)("span",{className:"spinner-surround",children:Object(b.jsx)(j.a,{animation:"border",size:"sm"})}):null,p(x||"")," Offer"]})]})]})]})}n(801);function O(){var e=Object(r.h)(),t=null===e||void 0===e?void 0:e.url_token,n=c.a.useState(null),a=Object(u.a)(n,2),s=a[0],p=a[1],f=c.a.useState(null),O=Object(u.a)(f,2),m=O[0],x=O[1],v=c.a.useState(""),w=Object(u.a)(v,2),y=w[0],g=w[1],k=c.a.useState(!1),S=Object(u.a)(k,2),C=S[0],N=S[1],A=c.a.useState(!1),T=Object(u.a)(A,2),D=T[0],F=T[1],_=["acknowledged"].includes((null===s||void 0===s?void 0:s.status)||"");function E(){return H.apply(this,arguments)}function H(){return(H=Object(o.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=m){e.next=2;break}throw new Error("Cannot submit a `null` decision");case 2:return n={decision:m,signature:y||null},e.next=5,Object(h.b)("/public/ddahs/".concat(t,"/").concat(m),n,!0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.next=3,E();case 3:F(!1),window.location.reload(!0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(c.a.useEffect((function(){function e(){return(e=Object(o.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(h.a)("/public/ddahs/".concat(t,"/details"),!0);case 3:n=e.sent,p(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[p,t]),null==t)return Object(b.jsx)(c.a.Fragment,{children:"Unknown URL token."});if(null==s)return Object(b.jsx)(c.a.Fragment,{children:"Loading..."});var L,P=s.position_code,U=s.status;return Object(b.jsxs)("div",{className:"contract-page",children:[Object(b.jsx)("div",{className:"header",children:Object(b.jsxs)("h1",{children:["Description of Duties and Allocation of Hours for"," ",P]})}),Object(b.jsxs)("div",{className:"content",children:[Object(b.jsxs)("div",{className:"decision",children:[Object(b.jsx)("h3",{children:Object(b.jsx)(l.a,{href:"/public/ddahs/".concat(t,".pdf"),role:"button",children:"Download PDF"})}),Object(b.jsxs)("h1",{children:["Status:",Object(b.jsxs)("span",{className:"".concat(U," capitalize"),children:[" ",(L=U,L.split(/\s+/).map((function(e){return e.charAt(0).toLocaleUpperCase()+e.slice(1)})).join(" "))]})]}),Object(b.jsxs)("form",{id:"decision",children:[Object(b.jsx)("h3",{children:"Please acknowledge receipt of this Description of Duties and Allocation of Hours form below. If there are any issues with your described duties or you need further clarification, please contact your course supervisor(s)."}),Object(b.jsxs)("div",{className:"decision-container",children:[Object(b.jsx)("input",{checked:"accept"===m,onChange:function(){return x("accept")},type:"radio",value:"accept",id:"radio-accept",name:"decision",disabled:_}),Object(b.jsx)("label",{htmlFor:"radio-accept",children:"Acknowledge"}),Object(b.jsx)("div",{className:"signature",children:Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"signature_name",children:Object(b.jsx)("p",{children:"To confirm your acknowledgement, please type your name below."})}),Object(b.jsx)("input",{type:"text",name:"signature_name",id:"signature_name",maxLength:300,value:y,onChange:function(e){return g(e.target.value)}}),Object(b.jsx)("div",{className:"input-placeholder",children:"."})]})}),Object(b.jsx)(l.a,{disabled:null==m||"accept"===m&&""===y,title:null==m?"You must choose to accept or reject the contract in order to submit":"accept"===m&&""===y?"You must sign your name to accept the offer":"Submit your decision",onClick:function(){return N(!0)},children:"Submit"})]})]}),Object(b.jsx)("div",{className:"admonishment"})]}),Object(b.jsx)("div",{className:"contract-view",children:Object(b.jsx)("iframe",{title:"Contract",src:"/public/ddahs/".concat(t)})})]}),Object(b.jsxs)(d.a,{show:C,onHide:function(){return N(!1)},children:[Object(b.jsx)(d.a.Header,{closeButton:!0,children:Object(b.jsx)(d.a.Title,{children:"Acknowledge DDAH"})}),Object(b.jsxs)(d.a.Body,{children:["Are you sure you want to ",Object(b.jsx)("b",{children:"acknowledge"})," the DDAH?"]}),Object(b.jsxs)(d.a.Footer,{children:[Object(b.jsx)(l.a,{variant:"secondary",onClick:function(){return N(!1)},children:"Cancel"}),Object(b.jsxs)(l.a,{onClick:function(){return I.apply(this,arguments)},children:[D?Object(b.jsx)("span",{className:"spinner-surround",children:Object(b.jsx)(j.a,{animation:"border",size:"sm"})}):null,"Acknowledge DDAH"]})]})]})]})}var m=n(21),x=n(347),v=(n(802),n(1372));function w(e){var t=e.submitDialogVisible,n=e.hideDialogAndResetData,a=e.applicationOpen,r=e.submissionError,s=e.confirmClicked,i=e.waiting,o=c.a.useState(!1),p=Object(u.a)(o,2),f=p[0],O=p[1];return c.a.useEffect((function(){t?Object(h.a)("/active_user").then((function(e){if(!e.utorid)throw new Error("Failed to get an authenticated response from the server")})).catch((function(){O(!0)})):O(!1)}),[t,O]),Object(b.jsxs)(d.a,{show:t,onHide:n,children:[Object(b.jsx)(d.a.Header,{closeButton:!0,children:Object(b.jsx)(d.a.Title,{children:"Submit Application"})}),Object(b.jsxs)(d.a.Body,{children:[a?null:Object(b.jsx)(v.a,{variant:"warning",children:"The application window is currently not open. Any applications submitted outside of the application window may not be considered."}),f&&Object(b.jsxs)(v.a,{variant:"danger",children:[Object(b.jsx)("b",{children:"Error:"})," Your session has timed out. Please refresh the browser and try again. (Your answers have not been saved, but you may copy-and-paste them to another document before refreshing.)"]}),r?Object(b.jsxs)(v.a,{variant:"danger",children:[Object(b.jsx)("b",{children:"Error:"})," ",r," Please review your answers and make sure all questions are answered appropriately.",Object(b.jsx)("p",{className:"mb-1",children:"If all your answers look correct, try"}),Object(b.jsxs)("ul",{className:"mt-1",children:[Object(b.jsx)("li",{children:"Refreshing the browser and trying to submit again."}),Object(b.jsx)("li",{children:"Submitting your application via Firefox or Chrome."})]})]}):"Are you sure you want to submit this TA application?"]}),Object(b.jsxs)(d.a.Footer,{children:[Object(b.jsx)(l.a,{variant:"secondary",onClick:n,children:"Cancel"}),Object(b.jsxs)(l.a,{onClick:s,disabled:!!r,children:[i?Object(b.jsx)("span",{className:"spinner-surround",children:Object(b.jsx)(j.a,{animation:"border",size:"sm"})}):null,"Submit"]})]})]})}function y(){var e=Object(r.h)(),t=null===e||void 0===e?void 0:e.url_token,n=c.a.useState(null),a=Object(u.a)(n,2),s=a[0],l=a[1],d=c.a.useState(null),j=Object(u.a)(d,2),p=j[0],f=j[1],O=c.a.useState(null),y=Object(u.a)(O,2),g=y[0],k=y[1],S=c.a.useState(!1),C=Object(u.a)(S,2),N=C[0],A=C[1],T=c.a.useState(!1),D=Object(u.a)(T,2),F=D[0],_=D[1],E=c.a.useState(!1),H=Object(u.a)(E,2),I=H[0],L=H[1],P=c.a.useState(null),U=Object(u.a)(P,2),B=U[0],R=U[1],Y=c.a.useState(!0),z=Object(u.a)(Y,2),J=z[0],M=z[1];c.a.useEffect((function(){function e(){return(e=Object(o.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(h.a)("/public/postings/".concat(t),!0);case 3:n=e.sent,l(n.survey),f(n.prefilled_data),M(n.open_status),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}null!=t&&function(){e.apply(this,arguments)}()}),[t,l,f,M]);var G=c.a.useMemo((function(){x.StylesManager.applyTheme("bootstrap"),x.defaultBootstrapCss.navigationButton="btn btn-primary";var e=new x.Model(s);return e.showPreviewBeforeComplete="showAnsweredQuestions",e.showQuestionNumbers="off",e.data=g||p,F&&setTimeout((function(){return e.doComplete()}),0),e}),[s,g,p,F]);if(c.a.useEffect((function(){G.onCompleting.add((function(e,t){F||(t.allowComplete=!1,k(e.data),A(!0),setTimeout((function(){return G.showPreview()}),0))}))}),[G,k,A,F]),null==t)return Object(b.jsx)(c.a.Fragment,{children:"Unknown URL token."});if(null==s||null==p)return Object(b.jsx)(c.a.Fragment,{children:"Loading..."});if(!function(e){var t,n=Object(m.a)((null===e||void 0===e?void 0:e.pages)||[]);try{for(n.s();!(t=n.n()).done;){var a,c=t.value,r=Object(m.a)((null===c||void 0===c?void 0:c.elements)||[]);try{for(r.s();!(a=r.n()).done;){var s,i=a.value;if("position_preferences"===i.name&&(null===i||void 0===i||null===(s=i.rows)||void 0===s?void 0:s.length)>0)return!0}}catch(o){r.e(o)}finally{r.f()}}}catch(o){n.e(o)}finally{n.f()}return!1}(s))return Object(b.jsx)(v.a,{variant:"warning",children:"There are not positions that can be applied for at this time. An administrator may update this posting in the future."});function Q(){return(Q=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Submitting data",g),e.prev=1,L(!0),e.next=5,Object(h.b)("/public/postings/".concat(t,"/submit"),{answers:g},!0);case 5:_(!0),G.doComplete(),k(p),A(!1),R(null),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.warn(e.t0),R("Could not submit application.");case 16:return e.prev=16,L(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})))).apply(this,arguments)}return Object(b.jsxs)(c.a.Fragment,{children:[Object(b.jsx)(x.Survey,{model:G}),Object(b.jsx)(w,{submitDialogVisible:N,hideDialogAndResetData:function(){G.data=g||G.data,_(!1),A(!1),R(null)},applicationOpen:J,submissionError:B,confirmClicked:function(){return Q.apply(this,arguments)},waiting:I})]})}function g(){return Object(b.jsxs)(r.d,{children:[Object(b.jsx)(r.b,{path:"/public/contracts/:url_token",children:Object(b.jsx)(f,{})}),Object(b.jsx)(r.b,{path:"/public/ddahs/:url_token",children:Object(b.jsx)(O,{})}),Object(b.jsx)(r.b,{path:"/public/postings/:url_token",children:Object(b.jsx)(y,{})})]})}function k(){return Object(b.jsx)(g,{})}}}]);
//# sourceMappingURL=10.7e3f831c.chunk.js.map